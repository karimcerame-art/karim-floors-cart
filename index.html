<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Karim Floors</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 700px;
  margin: auto;
  padding: 20px;
}

.product {
  border: 1px solid #ddd;
  padding: 15px;
  margin-bottom: 10px;
}

button {
  background: black;
  color: white;
  border: none;
  padding: 6px 10px;
  cursor: pointer;
  margin-left: 5px;
}

#cart {
  border-top: 2px solid #000;
  margin-top: 30px;
  padding-top: 15px;
}

.qty-btn {
  padding: 4px 8px;
}
</style>
</head>

<body>

<h1>Karim Floors</h1>

<!-- PRODUCTS -->
<div class="product">
  <h3>Laminate Oak</h3>
  <p>Price: 150</p>
  <button onclick="addToCart('Laminate Oak',150)">Add</button>
</div>

<div class="product">
  <h3>Laminate Walnut</h3>
  <p>Price: 180</p>
  <button onclick="addToCart('Laminate Walnut',180)">Add</button>
</div>

<div class="product">
  <h3>Laminate Maple</h3>
  <p>Price: 200</p>
  <button onclick="addToCart('Laminate Maple',200)">Add</button>
</div>

<!-- CART -->
<div id="cart">
  <h2>Cart</h2>
  <div id="cartItems"></div>
  <h3 id="total">Total: 0</h3>
  <button onclick="checkout()">Checkout</button>
</div>

<script>
function getCart() {
  return JSON.parse(localStorage.getItem('karim_cart')) || [];
}

function saveCart(cart) {
  localStorage.setItem('karim_cart', JSON.stringify(cart));
}

function addToCart(name, price) {
  let cart = getCart();
  let item = cart.find(p => p.name === name);

  if (item) {
    item.qty++;
  } else {
    cart.push({ name, price, qty: 1 });
  }

  saveCart(cart);
  renderCart();
}

function removeOne(name) {
  let cart = getCart();
  let item = cart.find(p => p.name === name);

  if (!item) return;

  item.qty--;

  if (item.qty <= 0) {
    cart = cart.filter(p => p.name !== name);
  }

  saveCart(cart);
  renderCart();
}

function removeAll(name) {
  let cart = getCart();
  cart = cart.filter(p => p.name !== name);
  saveCart(cart);
  renderCart();
}

function renderCart() {
  let cart = getCart();
  let html = '';
  let total = 0;

  if (cart.length === 0) {
    document.getElementById('cartItems').innerHTML = 'Cart is empty';
    document.getElementById('total').innerText = 'Total: 0';
    return;
  }

  cart.forEach(item => {
    let subtotal = item.price * item.qty;
    total += subtotal;

    html += `
      <p>
        <strong>${item.name}</strong><br>
        ${item.qty} × ${item.price} = ${subtotal}
        <button class="qty-btn" onclick="addToCart('${item.name}', ${item.price})">+</button>
        <button class="qty-btn" onclick="removeOne('${item.name}')">−</button>
        <button onclick="removeAll('${item.name}')">Remove</button>
      </p>
    `;
  });

  document.getElementById('cartItems').innerHTML = html;
  document.getElementById('total').innerText = 'Total: ' + total;
}

function checkout() {
  let cart = getCart();
  if (cart.length === 0) {
    alert('Cart is empty');
    return;
  }

  alert('Proceed to Stripe checkout');
  // Stripe integration goes here
}

renderCart();
</script>

</body>
</html>
